<!DOCTYPE html>
<html lang="en">

<%- include('./partials/head.ejs') %>

<body>
    <%- include('./partials/navbar.ejs') %>
    <%- include('./partials/modals/info_delete_modal.ejs') %>
    <script src="offer_check.js"></script>
    <div class="d-lg-flex justify-content-lg-center">
        <section class="py-4 py-xl-5">
            <div class="container text-start">
                <div class="text-white bg-dark border rounded border-0 p-4 p-md-5" style="width: auto;height: auto;">
                    <h2 class="fw-bold text-white mb-3">Your offers:</h2>
                    <div class="table-responsive">

                        <table class="table">
                            <tbody id="OfferTable">
                                Your offers:
                                <% offersY.forEach((offer) => { %>
                                <tr id="trY_<%= offer.offer_id %>">
                                    <td style="text-align: center; vertical-align: middle;"><span style="color: rgb(255, 255, 255);"><a class="nav-link" href="./search_form_id?idSearch=<%= offer.announcement_id %>" style="color: rgba(224,217,217,0.9);"><%= offer.announcement_id %></a></span></td>
                                    <td style="text-align: center; vertical-align: middle;"><span style="color: rgb(255, 255, 255);"><%= offer.amount %></span></td>
                                <% if(offer.offer_status === 0) { %> 
                                    <td style="text-align: center; vertical-align: middle;"><span style="color: rgb(255, 255, 255);">Pending</span></td>
                                <% } else if(offer.offer_status === 1) { %>
                                    <td style="text-align: center; vertical-align: middle;"><span style="color: rgb(4, 145, 21);">Accepted</span></td>
                                    <td><button class="btn btn-primary btn-lg me-2 buttonsAContact" id="contactA_<%= offer.offer_id %>" value="<%= offer.seller_id %>" style="margin: 0px;vertical-align: middle;">Contact</button></td>
                                <% } else { %> 
                                    <td style="text-align: center; vertical-align: middle;"><span style="color: red;">Declined</span></td>
                                <% } %>

                                </tr>
                                <% }) %>
                            </tbody>
                        </table>

                        <table class="table">
                            <tbody id="AcceptTable">
                                Offers you accepted:
                                <% offersA.forEach((offer) => { %>
                                <tr id="trA_<%= offer.offer_id %>">
                                    <td style="text-align: center; vertical-align: middle;"><span style="color: rgb(255, 255, 255);"><a class="nav-link" href="./search_form_id?idSearch=<%= offer.announcement_id %>" style="color: rgba(224,217,217,0.9);"><%= offer.announcement_id %></a></span></td>
                                    <td style="text-align: center; vertical-align: middle;"><span style="color: rgb(255, 255, 255);"><%= offer.amount %></span></td>
                                    <td><button class="btn btn-primary btn-lg me-2 buttonsAContact" id="contactA_<%= offer.offer_id %>" value="<%= offer.buyer_id %>" style="margin: 0px;vertical-align: middle;">Contact</button></td>
                                    <td><button class="btn btn-primary btn-lg me-2 buttonsAIgnore" id="ignoreA_<%= offer.offer_id %>" value="<%= offer.offer_id %>" style="background: rgb(56, 55, 46);margin: 0px;vertical-align: middle;">Ignore</button></td>
                                </tr>
                                <% }) %>
                            </tbody>
                        </table>

                        <table class="table">
                            <tbody id="deleteTable">
                                Pending Offers:
                                <% offers.forEach((offer) => { %>
                                <tr id="tr_<%= offer.offer_id %>">
                                    <td style="text-align: center; vertical-align: middle;"><span style="color: rgb(255, 255, 255);"><a class="nav-link" href="./search_form_id?idSearch=<%= offer.announcement_id %>" style="color: rgba(224,217,217,0.9);"><%= offer.announcement_id %></a></span></td>
                                    <td style="text-align: center; vertical-align: middle;"><span style="color: rgb(255, 255, 255);"><%= offer.amount %></span></td>
                                    <td><button class="btn btn-primary btn-lg me-2 buttonsAccept" id="accept_<%= offer.offer_id %>" value="<%= offer.offer_id %>" style="background: rgb(4, 145, 21);margin: 0px;vertical-align: middle;">Accept</button></td>
                                    <td><button class="btn btn-primary btn-lg me-2 buttonsDecline" id="decline_<%= offer.offer_id %>" value="<%= offer.offer_id %>" style="background: red;margin: 0px;vertical-align: middle;">Decline</button></td>
                                    <td><button class="btn btn-primary btn-lg me-2 buttonsIgnore" id="ignore_<%= offer.offer_id %>" value="<%= offer.offer_id %>" style="background: rgb(56, 55, 46);margin: 0px;vertical-align: middle;">Ignore</button></td>
                                </tr>
                                <% }) %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
</body>